using PListLexer
using Base.Test

l = lex_plist(readstring("test/example.plist"))

@test next_token(l) == Token(LBRACE)
@test next_token(l) == Token(IDENT, "Dogs")
@test next_token(l) == Token(EQUAL)
@test next_token(l) == Token(LPAREN)
@test next_token(l) == Token(LBRACE)
@test next_token(l) == Token(IDENT, "Name")
@test next_token(l) == Token(EQUAL)
@test next_token(l) == Token(STRING, "Scooby Doo")
@test next_token(l) == Token(SEMICOLON)
@test next_token(l) == Token(IDENT, "Age")
@test next_token(l) == Token(EQUAL)
@test next_token(l) == Token(NUMBER, "43")
@test next_token(l) == Token(SEMICOLON)
@test next_token(l) == Token(IDENT, "Colors")
@test next_token(l) == Token(EQUAL)
@test next_token(l) == Token(LPAREN)
@test next_token(l) == Token(IDENT, "Brown")
@test next_token(l) == Token(COMMA)
@test next_token(l) == Token(IDENT, "Black")
@test next_token(l) == Token(RPAREN)
@test next_token(l) == Token(SEMICOLON)
@test next_token(l) == Token(RBRACE)
@test next_token(l) == Token(RPAREN)
@test next_token(l) == Token(SEMICOLON)
@test next_token(l) == Token(IDENT, "BinaryData")
@test next_token(l) == Token(EQUAL)
@test next_token(l) == Token(HEXBINARY, "0fbd771c2735ae")
@test next_token(l) == Token(SEMICOLON)
@test next_token(l) == Token(RBRACE)


